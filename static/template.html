<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Carte de fidélité</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root{
      /* dimensions de ton visuel: 1024x585 */
      --w:1024; --h:585;

      /* Ajustements demandés */
      --nom-left: 24%;
      --nom-top: 66%;       /* avant 62% -> un peu plus bas */
      --nom-width: 64%;
      --nom-height: 9%;

      --prenom-left: 24%;
      --prenom-top: 77.5%;  /* avant 73.5% -> un peu plus bas */
      --prenom-width: 64%;
      --prenom-height: 9%;

      --points-left: 22%;   /* avant 24% -> un peu plus à gauche */
      --points-top: 86.2%;
      --points-width: 22%;
      --points-height: 10%;

      --reduc-left: 39%;    /* avant 41.8% -> un peu plus à gauche */
      --reduc-top: 86.2%;
      --reduc-width: 22%;
      --reduc-height: 10%;

      /* Code‑barres (centré en haut) */
      --bar-left: 10%;
      --bar-right: 10%;
      --bar-top: 41%;       /* baisse/monte si besoin */
    }

    html,body{margin:0;height:100%}
    body{
      background:#f5f7fb;display:grid;place-items:center;padding:16px;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#1a1f2c
    }
    .card{
      position:relative;
      aspect-ratio: var(--w) / var(--h);
      width: min(92vw, 860px);
      max-height: 92vh;
      background: #fff url('/static/carte-mdl.png') center/cover no-repeat;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0,0,0,.10);
      overflow:hidden;
    }
    .field{
      position:absolute; display:flex; align-items:center;
      padding: 0 1.2%;
      color:#1c2434; font-weight:700;
      white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
      font-size: clamp(14px, 2.2vw, 24px); letter-spacing:.2px;
      transform: translateY(-50%);
    }
    .nom{ left:var(--nom-left); top:var(--nom-top); width:var(--nom-width); height:var(--nom-height); }
    .prenom{ left:var(--prenom-left); top:var(--prenom-top); width:var(--prenom-width); height:var(--prenom-height); }
    .points{
      left:var(--points-left); top:var(--points-top);
      width:var(--points-width); height:var(--points-height);
      justify-content:center; font-weight:800;
    }
    .reduc{
      left:var(--reduc-left); top:var(--reduc-top);
      width:var(--reduc-width); height:var(--reduc-height);
      justify-content:center; font-weight:800;
    }

    /* Code‑barres */
    .barcode{
      position:absolute; left:var(--bar-left); right:var(--bar-right); top:var(--bar-top);
      display:flex; align-items:center; justify-content:center;
      transform: translateY(-50%);
      pointer-events:none;   /* clics passent à travers */
    }
    .barcode img{
      width: 80%;
      max-width: 720px;      /* plus grand sur PC, s’adapte sur mobile */
      height:auto;
      filter: drop-shadow(0 1px 0 rgba(255,255,255,.6));
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="field nom">{{NOM}}</div>
    <div class="field prenom">{{PRENOM}}</div>
    <div class="field points">{{POINTS}}</div>
    <div class="field reduc">{{REDUCTION}}</div>

    <!-- Code‑barres activé -->
    <div class="barcode">
      <img src="{{BARCODE_URL}}" alt="">
    </div>
  </div>
</body>
</html>
